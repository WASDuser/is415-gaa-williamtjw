<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="William">

<title>ICE 4 Readings: Summarised + chatGPT-ed – IS415</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">IS415</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercise" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hands-on Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercise">    
        <li>
    <a class="dropdown-item" href="../../../resources/Hands-on_Ex/ex1/Hands-On_Ex_1.html">
 <span class="dropdown-text">Hands-on Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../resources/Hands-on_Ex/ex2/Hands-On_Ex_2.html">
 <span class="dropdown-text">Hands-on Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../resources/Hands-on_Ex/ex3/Hands-On_Ex_3.html">
 <span class="dropdown-text">Hands-on Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../resources/Hands-on_Ex/ex4/Hands-On_Ex_4.html">
 <span class="dropdown-text">Hands-on Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../resources/Hands-on_Ex/ex5/Hands-On_Ex_5.html">
 <span class="dropdown-text">Hands-on Exercise 5</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercise-(ice" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">In-class Exercise (ICE)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercise-(ice">    
        <li>
    <a class="dropdown-item" href="../../../resources/ICEs/ex1/ice1.html">
 <span class="dropdown-text">ICE 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../resources/ICEs/ex2/ice2.html">
 <span class="dropdown-text">ICE 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../resources/ICEs/ex3/ice3.html">
 <span class="dropdown-text">ICE 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../resources/ICEs/ex4/ice4.html">
 <span class="dropdown-text">ICE 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../resources/ICEs/ex5/ice5.qmd">
 <span class="dropdown-text">ICE 5</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercise-(the" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Take-home Exercise (THE)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercise-(the">    
        <li>
    <a class="dropdown-item" href="../../../resources/Take-home_Ex/ex1/Take-home_Ex_1.html">
 <span class="dropdown-text">Take-home Exercise 1</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#spatio-temporal-point-process-statistics-a-review" id="toc-spatio-temporal-point-process-statistics-a-review" class="nav-link active" data-scroll-target="#spatio-temporal-point-process-statistics-a-review">“Spatio-temporal point process statistics: A review”</a></li>
  <li><a href="#spatiotemporal-point-pattern-analysis-using-ripleys-k" id="toc-spatiotemporal-point-pattern-analysis-using-ripleys-k" class="nav-link" data-scroll-target="#spatiotemporal-point-pattern-analysis-using-ripleys-k">“Spatiotemporal Point Pattern Analysis Using Ripley’s K”</a></li>
  <li><a href="#evolution-of-forest-fires-in-portugal-from-spatio-temporal-point-events-to-smoothed-density-maps-natural-hazards-dordrecht" id="toc-evolution-of-forest-fires-in-portugal-from-spatio-temporal-point-events-to-smoothed-density-maps-natural-hazards-dordrecht" class="nav-link" data-scroll-target="#evolution-of-forest-fires-in-portugal-from-spatio-temporal-point-events-to-smoothed-density-maps-natural-hazards-dordrecht">“Evolution of forest fires in Portugal: from spatio-temporal point events to smoothed density maps”, <em>Natural hazards</em> (Dordrecht)</a></li>
  <li><a href="#pinpointing-spatio-temporal-interactions-in-wildfire-patterns-stochastic-environmental-research-and-risk-assessment" id="toc-pinpointing-spatio-temporal-interactions-in-wildfire-patterns-stochastic-environmental-research-and-risk-assessment" class="nav-link" data-scroll-target="#pinpointing-spatio-temporal-interactions-in-wildfire-patterns-stochastic-environmental-research-and-risk-assessment">“Pinpointing spatio-temporal interactions in wildfire patterns”, <em>Stochastic environmental research and risk assessment</em></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ICE 4 Readings: Summarised + chatGPT-ed</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>William </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="spatio-temporal-point-process-statistics-a-review" class="level3">
<h3 class="anchored" data-anchor-id="spatio-temporal-point-process-statistics-a-review"><a href="https://www.sciencedirect.com/science/article/abs/pii/S2211675316301130">“Spatio-temporal point process statistics: A review”</a></h3>
<p><strong>Types of Spatio-Temporal Point Patterns</strong></p>
<p>The paper categorizes spatio-temporal point patterns into three main types:</p>
<ol type="1">
<li><p><strong>Instantaneous events</strong>: Data are treated as a collection of instantaneous events, each occurring at a given spatial location and time point. Examples include earthquakes and disease outbreaks.</p></li>
<li><p><strong>Points that arrive, obtain a location, and stay for a period</strong>: During the study period, points arrive at some time, obtain a spatial location, and stay for a given period before being removed. Examples include modeling forest stands where each tree has a birth time and lifetime.</p></li>
<li><p><strong>Continuously moving objects sampled at discrete times</strong>: Objects move continuously through space and form paths, which are sampled at discrete time points. Examples include analyzing animal movement patterns.</p></li>
</ol>
<p><strong>Statistical Characteristics</strong></p>
<p>The paper discusses important characteristics of spatio-temporal point processes, including:</p>
<ul>
<li><p><strong>Product densities</strong>: Generalize the concept of intensity functions to higher orders.</p></li>
<li><p><strong>Intensity functions</strong>: Describe the expected number of events per unit space and time. Separability into spatial and temporal components is an important property.</p></li>
<li><p><strong>Conditional intensity functions</strong>: Uniquely characterize certain spatio-temporal point processes and govern the expected number of future events given the history of the process.</p></li>
<li><p><strong>Second-order summary statistics</strong>: Such as the pair correlation function, K-function, and J-function, can be used to quantify spatial and temporal interactions.</p></li>
</ul>
<p><strong>Empirical Models</strong></p>
<p>Various empirical models for spatio-temporal point processes are reviewed, including:</p>
<ul>
<li><p><strong>Homogeneous and inhomogeneous Poisson processes</strong></p></li>
<li><p><strong>Neyman-Scott processes</strong></p></li>
<li><p><strong>Geometric anisotropic Poisson cluster processes</strong></p></li>
<li><p><strong>Inhibition processes</strong></p></li>
<li><p><strong>Strauss processes</strong></p></li>
<li><p><strong>Cox processes</strong></p></li>
<li><p><strong>Log-Gaussian Cox processes</strong></p></li>
</ul>
<p>These models can be fitted to data using likelihood-based inference methods.</p>
<p><strong>Mechanistic Models</strong></p>
<p>Conditional intensity-based models, referred to as mechanistic models, treat the spatial locations as marks of a temporal point process. The conditional intensity function governs the expected number of future events given the history. Mechanistic models are commonly used for analyzing earthquake data and other applications.</p>
<p><strong>Inference Methods</strong></p>
<p>The paper covers likelihood inference and partial likelihood methods for parameter estimation. Graphical tools like residual plots and Q-Q plots are discussed for assessing goodness-of-fit.</p>
<p><strong>Real-World Applications</strong></p>
<p>Three motivating examples are analyzed throughout the paper to illustrate the application of the discussed techniques to real data:</p>
<ol type="1">
<li><p><strong>Human outbreaks of Ebola</strong></p></li>
<li><p><strong>Euphausia glacialis</strong> (a type of krill)</p></li>
<li><p><strong>Tornadoes in South Carolina</strong></p></li>
</ol>
<p>These examples highlight the growing availability of spatio-temporal data and the importance of understanding the mechanisms governing event occurrences in space and time across various scientific fields.</p>
</section>
<section id="spatiotemporal-point-pattern-analysis-using-ripleys-k" class="level3">
<h3 class="anchored" data-anchor-id="spatiotemporal-point-pattern-analysis-using-ripleys-k"><a href="https://www.google.com/url?sa=t&amp;source=web&amp;rct=j&amp;opi=89978449&amp;url=https://pages.charlotte.edu/eric-delmelle/wp-content/uploads/sites/150/2019/09/Spatiotemporal-Point-Pattern-Analysis-Using-Ripleys-K-Function.pdf&amp;ved=2ahUKEwiL24W_8qyIAxXzXGwGHe2RL8wQFnoECDAQAQ&amp;usg=AOvVaw18Au9kh6LfNH_RJpPglq2J">“Spatiotemporal Point Pattern Analysis Using Ripley’s K”</a></h3>
<p><strong>Global Ripley’s K Function for Spatiotemporal Point Patterns</strong></p>
<ul>
<li><p>The global space-time Ripley’s K function evaluates the spatiotemporal characteristics of a point pattern at the aggregated level using the entire dataset</p></li>
<li><p>It is calculated by dividing the number of events expected to fall within a given spatial distance d and temporal distance t by the intensity λ of the point events</p></li>
<li><p>The global space-time K function is the cumulative distribution of observed point events with increasing space and time distance</p></li>
<li><p>It can indicate clustering, randomness, or regularity in the spatiotemporal point pattern</p></li>
</ul>
<p><strong>Local Ripley’s K Function for Spatiotemporal Point Patterns</strong></p>
<ul>
<li><p>The local form of Ripley’s K function quantifies the characteristics of the point pattern and its deviation from expected patterns locally</p></li>
<li><p>It provides insights into the spatiotemporal dynamics of the point process at a more granular level compared to the global K function</p></li>
</ul>
<p><strong>Case Study: Dengue Fever in Cali, Colombia</strong></p>
<ul>
<li><p>The authors applied global and local forms of Ripley’s K function to study the spatiotemporal patterns of dengue fever in Cali, Colombia</p></li>
<li><p>The case study illustrates the benefits of using the combined global and local Ripley’s K function approach for analyzing dynamic geospatial phenomena</p></li>
</ul>
<p>In conclusion, the article demonstrates the capability of Ripley’s K function, both in its global and local forms, for studying spatiotemporal point patterns The case study on dengue fever highlights the insights that can be gained by applying this methodology to real-world geospatial data</p>
</section>
<section id="evolution-of-forest-fires-in-portugal-from-spatio-temporal-point-events-to-smoothed-density-maps-natural-hazards-dordrecht" class="level3">
<h3 class="anchored" data-anchor-id="evolution-of-forest-fires-in-portugal-from-spatio-temporal-point-events-to-smoothed-density-maps-natural-hazards-dordrecht">“Evolution of forest fires in Portugal: from spatio-temporal point events to smoothed density maps”, <em>Natural hazards</em> (Dordrecht)</h3>
<p>This article analyzes the spatial and temporal distribution of forest fires in Portugal from 1990 to 2013 using spatio-temporal statistical methods. The authors used the Portuguese National Mapping Burnt Areas (NMBA) dataset, which contains 27,273 fire events with a burned area greater than 5 hectares</p>
<p>Key findings:</p>
<ul>
<li><p>The northern half of Portugal is much more affected by forest fires than the southern half, with 25,322 and 1,951 events respectively</p></li>
<li><p>Fires were categorized into small (5-15 ha), medium (15-100 ha), and large (&gt;100 ha) based on burned area. Medium fires tend to aggregate around small fires, while large fires aggregate at larger distances and longer times</p></li>
<li><p>Density maps show hot spots are present almost every year in the northern region, with higher concentrations, while the southern half has lower densities mainly in the 2000-2007 period</p></li>
<li><p>The largest total annual burned areas occurred in 2003 and 2005, despite not having the highest number of events in those years. The years with the most fires were 1998, 2001, and 2002 with around 1,850 events each</p></li>
</ul>
<p>The authors applied four spatio-temporal statistical methods to explore the data:</p>
<ol type="1">
<li><p><strong>Geographically weighted summary statistics</strong> to examine how average burned area varies locally</p></li>
<li><p><strong>Bivariate K function</strong> to test space-time interaction and spatial attraction/independence between fires of different sizes</p></li>
<li><p><strong>Space-time K function</strong> to test the interaction between space and time</p></li>
<li><p><strong>Space-time kernel density</strong> to create smoothed density surfaces representing over-densities of fires</p></li>
</ol>
<p>The results help identify vulnerable areas and time periods where fire hazard is more likely to occur, which is crucial information for fire prevention and management strategies.</p>
</section>
<section id="pinpointing-spatio-temporal-interactions-in-wildfire-patterns-stochastic-environmental-research-and-risk-assessment" class="level3">
<h3 class="anchored" data-anchor-id="pinpointing-spatio-temporal-interactions-in-wildfire-patterns-stochastic-environmental-research-and-risk-assessment">“Pinpointing spatio-temporal interactions in wildfire patterns”, <em>Stochastic environmental research and risk assessment</em></h3>
<p><strong>Introduction</strong></p>
<p>The introduction defines wildfires as uncontrolled fires in vegetation, emphasizing their unique characteristics, such as rapid spread and potential for unexpected direction changes. It highlights the Mediterranean region’s high fire risk due to climatic conditions and landscape dynamics, particularly in Catalonia, where afforestation and rural abandonment have increased vulnerability to fires. The authors argue that understanding the spatial and temporal patterns of wildfires is crucial for effective management and prevention.</p>
<p><strong>Data and Methodology</strong></p>
<p>The study focuses on a dataset of 3,083 wildfires recorded in Catalonia during the specified period. The authors categorize the causes of these wildfires into natural, negligence, intentional (arson), and unknown. They also analyze spatial covariates such as slope, aspect, hill shade, and land use, utilizing the CORINE land cover database.The authors employ point process models to evaluate the spatial distribution of wildfires and assess clustering patterns. They utilize statistical methods to test for deviations from complete spatial randomness (CSR), which helps identify whether wildfires are randomly distributed or exhibit clustering.</p>
<p><strong>Results</strong></p>
<p>The analysis reveals that negligence is the most common cause of wildfires, followed by intentional and unknown causes. The study notes a significant increase in wildfires from 2004 to 2005, followed by a decrease in subsequent years, with 2008 recording the lowest number of incidents.Spatially, the distribution of wildfires varies by cause, with intentional and unknown causes displaying similar patterns. The paper discusses the implications of these findings for wildfire management, suggesting that understanding clustering can aid in resource allocation and risk assessment.</p>
<p><strong>Statistical Analysis</strong></p>
<p>The authors delve into functional summary statistics and the mathematical theory of point processes, explaining how these tools can model the irregular distribution of wildfire events. They emphasize the importance of testing CSR to classify observed patterns as regular, random, or aggregated, which informs further modeling efforts.</p>
<p><strong>Conclusion</strong></p>
<p>The paper concludes by reiterating the significance of spatio-temporal analysis in understanding wildfire dynamics. The authors advocate for the use of advanced statistical modeling techniques to improve wildfire management strategies, emphasizing the need for ongoing research in this area.Overall, the study provides valuable insights into the factors influencing wildfire patterns in Catalonia, highlighting the interplay between environmental variables and human activities.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>